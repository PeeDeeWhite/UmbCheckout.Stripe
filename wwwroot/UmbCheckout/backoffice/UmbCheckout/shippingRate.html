<div ng-controller="UmbCheckout.ShippingRate.Controller as vm" class="umbcheckout">
    <form></form>
    <form name="shippingRateForm" novalidate val-form-manager ng-submit="vm.saveShippingRate()">
        <umb-editor-view header="false" class="form-horizontal">
            <umb-editor-container class="dashboard">
                <umb-box>
                    <umb-box-content>
                        <h1><span ng-if="!vm.LicenseState.Valid">UmbCheckout - </span>Add Stripe Shipping Rate</h1>

                        <p class="muted">
                            You will need to create your Shipping Rates within your <a href="https://dashboard.stripe.com/shipping-rates" target="_blank">Stripe account here</a> before you can add them below.
                        </p>

                        <p class="red bold" ng-if="!vm.LicenseState.Valid" ng-bind-html="vm.LicenseState.Message">
                        </p>

                    </umb-box-content>
                </umb-box>
                <umb-box>
                    <umb-box-header title="Shipping Rate"></umb-box-header>
                    <umb-box-content>
                        <umb-property property="property" ng-repeat="property in vm.properties">
                            <umb-property-editor model="property"></umb-property-editor>
                        </umb-property>
                    </umb-box-content>
                </umb-box>
                <umb-box ng-if="vm.stripeShippingRate">
                    <umb-box-header title="Stripe Shipping Rate Details" description="The details of the Shipping Rate as found in your Stripe account"></umb-box-header>
                    <umb-box-content>
                        <div class="control-group umb-control-group">
                            <div class="umb-el-wrap">
                                <div class="control-header" aria-hidden="false">
                                    <label data-element="property-label-name" class="control-label ng-binding" title="name">Shipping Rate Name</label>
                                </div>
                                <div class="controls">
                                    <div class="umb-property ng-scope">
                                        <div class="umb-el-wrap ng-binding">
                                            {{vm.stripeShippingRate.displayName}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="control-group umb-control-group">
                            <div class="umb-el-wrap">
                                <div class="control-header" aria-hidden="false">
                                    <label data-element="property-label-name" class="control-label ng-binding" title="name">Shipping Rate Amount</label>
                                    <small class="control-description ng-binding ng-scope">In Pence / Cents</small>
                                </div>
                                <div class="controls">
                                    <div class="umb-property ng-scope">
                                        <div class="umb-el-wrap ng-binding">
                                            {{vm.stripeShippingRate.fixedAmount.amount}} {{vm.stripeShippingRate.fixedAmount.currency}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="control-group umb-control-group">
                            <div class="umb-el-wrap">
                                <div class="control-header" aria-hidden="false">
                                    <label data-element="property-label-name" class="control-label ng-binding" title="name">Shipping Rate Minimum</label>
                                </div>
                                <div class="controls">
                                    <div class="umb-property ng-scope">
                                        <div class="umb-el-wrap ng-binding">
                                            {{vm.stripeShippingRate.deliveryEstimate.minimum.value}} {{vm.stripeShippingRate.deliveryEstimate.minimum.unit}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="control-group umb-control-group">
                            <div class="umb-el-wrap">
                                <div class="control-header" aria-hidden="false">
                                    <label data-element="property-label-name" class="control-label ng-binding" title="name">Shipping Rate Maximum</label>
                                </div>
                                <div class="controls">
                                    <div class="umb-property ng-scope">
                                        <div class="umb-el-wrap ng-binding">
                                            {{vm.stripeShippingRate.deliveryEstimate.maximum.value}} {{vm.stripeShippingRate.deliveryEstimate.maximum.unit}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="control-group umb-control-group">
                            <div class="umb-el-wrap">
                                <div class="control-header" aria-hidden="false">
                                    <label data-element="property-label-name" class="control-label ng-binding" title="name">Manage Shipping Rate</label>
                                </div>
                                <div class="controls">
                                    <div class="umb-property ng-scope">
                                        <div class="umb-el-wrap ng-binding">
                                            <a href="https://dashboard.stripe.com/shipping-rates/{{vm.stripeShippingRate.id}}" target="_blank" class="btn umb-button__button btn-success umb-button-- umb-outline">Edit Shipping Rate</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </umb-box-content>
                </umb-box>
                <umb-box>
                    <umb-box-header title="Stripe Shipping Rates" description="The available Shipping Rates found in your Stripe account, click on a Shipping Rate to update the form above"></umb-box-header>
                    <umb-box-content>
                        <umb-table ng-if="vm.stripeShippingRates"
                                   items="vm.stripeShippingRates"
                                   on-select="vm.clickItem(item)"
                                   on-click="vm.clickItem(item)"
                                   item-properties="vm.options.includeProperties">
                        </umb-table>
                    </umb-box-content>
                </umb-box>
            </umb-editor-container>

            <umb-editor-footer>
                <umb-editor-footer-content-left>
                    <a href="https://umbhost.net" class="btn umb-button__button btn-link umb-button-- umb-outline" ng-if="!vm.LicenseState.Valid">
                        Made with <span class="color-pink icon icon-hearts"></span> by UmbHost Limited
                    </a>
                </umb-editor-footer-content-left>

                <umb-editor-footer-content-right>
                    <umb-button type="button"
                                button-style="danger"
                                state="vm.deleteButtonState"
                                action="vm.deleteTaxRate()"
                                label-key="delete"
                                disabled="vm.deleteButtonState === 'busy'">
                    </umb-button>
                    <umb-button type="submit"
                                button-style="success"
                                state="vm.saveButtonState"
                                label-key="buttons_save"
                                shortcut="ctrl+s"
                                disabled="vm.saveButtonState === 'busy'">
                    </umb-button>
                </umb-editor-footer-content-right>
            </umb-editor-footer>
        </umb-editor-view>
    </form>
</div>